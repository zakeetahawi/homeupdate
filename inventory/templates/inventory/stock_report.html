{% extends 'inventory/inventory_base_custom.html' %}
{% load static %}
{% block inventory_title %}تقرير المخزون{% endblock %}
{% block breadcrumb_items %}
    <li class="breadcrumb-item">
        <a href="{% url 'inventory:dashboard' %}">لوحة التحكم</a>
    </li>
    <li class="breadcrumb-item">
        <a href="{% url 'inventory:report_list' %}">التقارير</a>
    </li>
    <li class="breadcrumb-item active">تقرير المخزون</li>
{% endblock %}
{% block inventory_content %}
    <div class="container-fluid">
        <!-- الإحصائيات العامة -->
        <div class="row mb-4">
            <div class="col-md-3">
                <div class="card bg-primary text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-boxes fa-2x mb-2"></i>
                        <h3>{{ total_products|default:0 }}</h3>
                        <p class="mb-0">إجمالي المنتجات</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-success text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-check-circle fa-2x mb-2"></i>
                        <h3>{{ in_stock_products|default:0 }}</h3>
                        <p class="mb-0">منتجات متوفرة</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-warning text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-exclamation-triangle fa-2x mb-2"></i>
                        <h3>{{ low_stock_products|default:0 }}</h3>
                        <p class="mb-0">مخزون منخفض</p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="card bg-danger text-white">
                    <div class="card-body text-center">
                        <i class="fas fa-times-circle fa-2x mb-2"></i>
                        <h3>{{ out_of_stock_products|default:0 }}</h3>
                        <p class="mb-0">نفاد المخزون</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- روابط التقارير التفصيلية -->
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-light">
                        <h6 class="mb-0">
                            <i class="fas fa-chart-line"></i> تقارير المخزون
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="list-group list-group-flush">
                            <a href="{% url 'inventory:low_stock_report' %}"
                               class="list-group-item list-group-item-action">
                                <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                                تقرير المخزون المنخفض
                            </a>
                            <a href="{% url 'inventory:stock_movement_report' %}"
                               class="list-group-item list-group-item-action">
                                <i class="fas fa-exchange-alt text-info me-2"></i>
                                تقرير حركات المخزون
                            </a>
                            <a href="{% url 'inventory:stock_movement_summary' %}"
                               class="list-group-item list-group-item-action">
                                <i class="fas fa-chart-pie text-primary me-2"></i>
                                ملخص الحركات
                            </a>
                            <a href="{% url 'inventory:stock_discrepancy_report' %}"
                               class="list-group-item list-group-item-action">
                                <i class="fas fa-not-equal text-danger me-2"></i>
                                تقرير التناقضات
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card h-100">
                    <div class="card-header bg-light">
                        <h6 class="mb-0">
                            <i class="fas fa-warehouse"></i> تقارير المستودعات
                        </h6>
                    </div>
                    <div class="card-body">
                        <div class="list-group list-group-flush">
                            <a href="{% url 'inventory:warehouse_list' %}"
                               class="list-group-item list-group-item-action">
                                <i class="fas fa-warehouse text-success me-2"></i>
                                قائمة المستودعات
                            </a>
                            <a href="{% url 'inventory:stock_transfer_list' %}"
                               class="list-group-item list-group-item-action">
                                <i class="fas fa-truck text-info me-2"></i>
                                التحويلات المخزنية
                            </a>
                            <a href="{% url 'inventory:bulk_upload_log_list' %}"
                               class="list-group-item list-group-item-action">
                                <i class="fas fa-upload text-secondary me-2"></i>
                                سجلات الرفع الجماعي
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- معلومات إضافية -->
        <div class="card">
            <div class="card-header bg-light">
                <h6 class="mb-0">
                    <i class="fas fa-info-circle"></i> معلومات التقرير
                </h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <p>
                            <strong>تاريخ التقرير:</strong> {% now "Y-m-d H:i" %}
                        </p>
                    </div>
                    <div class="col-md-6 text-end">
                        <button onclick="window.print()" class="btn btn-outline-primary">
                            <i class="fas fa-print"></i> طباعة
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
