# ุฏููู ุงุณุชุฎุฏุงู ุฏูุฑ "ูุณุคูู ุงุณุชูุงู ูุตูุน" ๐ญ

## ๐ ุงููุญุชููุงุช

1. [ูุธุฑุฉ ุนุงูุฉ](#ูุธุฑุฉ-ุนุงูุฉ)
2. [ููููุฉ ุฅูุดุงุก ูุณุชุฎุฏู](#ููููุฉ-ุฅูุดุงุก-ูุณุชุฎุฏู)
3. [ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ](#ุงูุตูุงุญูุงุช-ุงููุชุงุญุฉ)
4. [ูุงุฌูุฉ ุงููุณุชุฎุฏู](#ูุงุฌูุฉ-ุงููุณุชุฎุฏู)
5. [ุงุฎุชุจุงุฑ ุงููุธุงู](#ุงุฎุชุจุงุฑ-ุงููุธุงู)
6. [ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ](#ุงูุฃุณุฆูุฉ-ุงูุดุงุฆุนุฉ)

---

## ๐ ูุธุฑุฉ ุนุงูุฉ

**ุฏูุฑ "ูุณุคูู ุงุณุชูุงู ูุตูุน"** ูู ุฏูุฑ ูุชุฎุตุต ูู ุงููุธุงู ูุณูุญ ูููุณุชุฎุฏู ุจู:

- โ ุงุณุชูุงู ุงูุฃููุดุฉ ูู ูุณู ุงูุชูุทูุน
- โ ุชุณููู ุงูุฃููุดุฉ ูุฎุทูุท ุงูุฅูุชุงุฌ
- โ ุนุฑุถ ูุงุฆูุฉ ุงุณุชูุงูุงุช ุงูุฃููุดุฉ
- โ ุนุฑุถ ุฃูุงูุฑ ุงูุชุตููุน (ูููุฑุงุกุฉ ููุท)

### โจ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ:

1. **ุฑุงุจุท ูุจุงุดุฑ ูู ุงูู navbar**: ูุธูุฑ ุฑุงุจุท "ุงุณุชูุงู ูู ุงููุตูุน" ูุจุงุดุฑุฉ ูู ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ
2. **ุตูุงุญูุงุช ูุญุฏุฏุฉ**: ุตูุงุญูุงุช ูุญุฏูุฏุฉ ููุท ูููุงู ุงูุงุณุชูุงู ูุงูุชุณููู
3. **ุฅุฏุงุฑุฉ ุณููุฉ**: ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ ูููู ุชูุนูู/ุชุนุทูู ุงูุฏูุฑ ุจููุฑุฉ ูุงุญุฏุฉ

---

## ๐ค ููููุฉ ุฅูุดุงุก ูุณุชุฎุฏู

### ุงูุทุฑููุฉ 1: ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ (ุงูููุตู ุจูุง)

1. **ุงุฐูุจ ุฅูู ููุญุฉ ุงูุฅุฏุงุฑุฉ:**
   ```
   https://yourdomain.com/admin/accounts/user/add/
   ```

2. **ุงููุฃ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ:**
   - ุงุณู ุงููุณุชุฎุฏู (username)
   - ูููุฉ ุงููุฑูุฑ (password)
   - ุงูุงุณู ุงูุฃูู ูุงูุฃุฎูุฑ
   - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   - ุฑูู ุงููุงุชู (ุงุฎุชูุงุฑู)

3. **ูู ูุณู "ุงูุตูุงุญูุงุช":**
   - โ ูุนูู: **ูุดุท** (is_active)
   - โ ูุนูู: **ููุธู** (is_staff)
   - โ ูุนูู: **ูุณุคูู ุงุณุชูุงู ูุตูุน** (is_factory_receiver)

4. **ุงุญูุธ ุงููุณุชุฎุฏู**

5. **ุชุญูู ูู ุงููุฌููุนุฉ:**
   - ุงุฐูุจ ุฅูู: `/admin/auth/group/`
   - ุงุจุญุซ ุนู "ูุณุคูู ุงุณุชูุงู ูุตูุน"
   - ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู ููุฌูุฏ ูู ูุงุฆูุฉ ุงููุณุชุฎุฏููู

### ุงูุทุฑููุฉ 2: ูู Django Shell

```bash
python manage.py shell
```

```python
from accounts.models import User
from django.contrib.auth.models import Group

# ุฅูุดุงุก ุงููุณุชุฎุฏู
user = User.objects.create_user(
    username='receiver1',
    password='password123',
    email='receiver1@company.com',
    first_name='ูุญูุฏ',
    last_name='ุฃุญูุฏ',
    is_factory_receiver=True,
    is_staff=True,
    is_active=True
)

# ุฅุถุงูุฉ ูููุฌููุนุฉ
group = Group.objects.get(name='ูุณุคูู ุงุณุชูุงู ูุตูุน')
user.groups.add(group)

print(f'โ ุชู ุฅูุดุงุก ุงููุณุชุฎุฏู: {user.username}')
```

### ุงูุทุฑููุฉ 3: ุจุงุณุชุฎุฏุงู ุณูุฑูุจุช ุงูุงุฎุชุจุงุฑ

```bash
python test_factory_receiver.py
```

ุณูุชู ุฅูุดุงุก ูุณุชุฎุฏู ุชุฌุฑูุจู:
- **ุงุณู ุงููุณุชุฎุฏู:** `factory_receiver_test`
- **ูููุฉ ุงููุฑูุฑ:** `test123`

---

## ๐ ุงูุตูุงุญูุงุช ุงููุชุงุญุฉ

### ุงูุตูุงุญูุงุช ุงููุจุงุดุฑุฉ:

| ุงูุตูุงุญูุฉ | ุงููุตู | ุงูุงุณุชุฎุฏุงู |
|---------|-------|----------|
| `manufacturing.can_receive_fabric` | ุงุณุชูุงู ุงูุฃููุดุฉ | ุงุณุชูุงู ุงูุฃููุดุฉ ูู ุงูุชูุทูุน |
| `manufacturing.can_deliver_to_production_line` | ุชุณููู ุงูุฃููุดุฉ | ุชุณููู ุงูุฃููุดุฉ ูุฎุทูุท ุงูุฅูุชุงุฌ |
| `manufacturing.can_view_fabric_receipts` | ุนุฑุถ ุงูุงุณุชูุงูุงุช | ุนุฑุถ ูุงุฆูุฉ ุฌููุน ุงูุงุณุชูุงูุงุช |
| `manufacturing.view_manufacturingorder` | ุนุฑุถ ุฃูุงูุฑ ุงูุชุตููุน | ุนุฑุถ ุชูุงุตูู ุงูุฃูุงูุฑ (ูููุฑุงุกุฉ ููุท) |
| `manufacturing.view_manufacturingorderitem` | ุนุฑุถ ุนูุงุตุฑ ุงูุฃูุงูุฑ | ุนุฑุถ ุชูุงุตูู ุงูุนูุงุตุฑ |
| `manufacturing.view_productionline` | ุนุฑุถ ุฎุทูุท ุงูุฅูุชุงุฌ | ุนุฑุถ ุฎุทูุท ุงูุฅูุชุงุฌ ุงููุชุงุญุฉ |

### ูุง ูุง ูููู ูููุณุชุฎุฏู ูุนูู:

- โ ุฅูุดุงุก ุฃู ุชุนุฏูู ุฃูุงูุฑ ุงูุชุตููุน
- โ ุญุฐู ุงูุงุณุชูุงูุงุช
- โ ุงููุตูู ุฅูู ุฅุนุฏุงุฏุงุช ุงููุธุงู
- โ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู ุฃู ุงูุตูุงุญูุงุช

---

## ๐ฅ๏ธ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูุง ุณูุฑุงู ุงููุณุชุฎุฏู ุจุนุฏ ุชุณุฌูู ุงูุฏุฎูู:

#### 1. ุงูู Navbar (ุงููุงุฆูุฉ ุงูุฑุฆูุณูุฉ):

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ [Logo]  ๐ญ ุงุณุชูุงู ูู ุงููุตูุน    ๐ค ูุญูุฏ ุฃุญูุฏ  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงูุฑุงุจุท ูุธูุฑ ูุจุงุดุฑุฉ** - ููุณ ุฏุงุฎู ูุงุฆูุฉ ููุณุฏูุฉ!

#### 2. ุตูุญุฉ ุงุณุชูุงู ุงูุฃููุดุฉ:

ุนูุฏ ุงูุถุบุท ุนูู ุงูุฑุงุจุทุ ุณูุชู ูุชุญ:
```
/manufacturing/fabric-receipt/
```

ูุฐู ุงูุตูุญุฉ ุชุญุชูู ุนูู:
- ูุงุฆูุฉ ุงูุฃููุดุฉ ุงูููุชุธุฑุฉ ููุงุณุชูุงู
- ูููุฐุฌ ุงุณุชูุงู ุงูุฃููุดุฉ
- ูุงุฆูุฉ ุงูุฃููุดุฉ ุงููุณุชููุฉ
- ูููุฐุฌ ุชุณููู ุงูุฃููุดุฉ ูุฎุทูุท ุงูุฅูุชุงุฌ

#### 3. ูุซุงู ุนูู ุงููุงุฌูุฉ:

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ        ๐ญ ุงุณุชูุงู ุงูุฃููุดุฉ ูู ุงููุตูุน          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฃ
โ                                              โ
โ  ๐ฆ ุงูุฃููุดุฉ ุงูููุชุธุฑุฉ ููุงุณุชูุงู (5)          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ          โ
โ  โ ุฃูุฑ #123 - ููุงุด ููุน A          โ          โ
โ  โ ุงููููุฉ: 50 ูุชุฑ                 โ          โ
โ  โ [ุงุณุชูุงู] [ุชูุงุตูู]             โ          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ          โ
โ                                              โ
โ  โ ุงูุฃููุดุฉ ุงููุณุชููุฉ ุงูููู (12)             โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ          โ
โ  โ ุฃูุฑ #120 - ููุงุด ููุน B          โ          โ
โ  โ ุชู ุงูุงุณุชูุงู: 10:30 ุตุจุงุญุงู     โ          โ
โ  โ [ุชุณููู ูุฎุท ุงูุฅูุชุงุฌ]           โ          โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ          โ
โ                                              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุจุงุณุชุฎุฏุงู ุณูุฑูุจุช ุงูุงุฎุชุจุงุฑ:

```bash
python test_factory_receiver.py
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
```
๐ ุฌููุน ุงูุงุฎุชุจุงุฑุงุช ูุฌุญุช!

โ ูุฌูุฏ ุงููุฌููุนุฉ
โ ูุฌูุฏ ุงูุญูู
โ ROLE_HIERARCHY
โ ุฅูุดุงุก ุงููุณุชุฎุฏู
โ ุงูุตูุงุญูุงุช
โ get_user_role()
```

### 2. ุงุฎุชุจุงุฑ ูุฏูู:

1. **ุชุณุฌูู ุงูุฏุฎูู:**
   ```
   URL: /admin/
   Username: factory_receiver_test
   Password: test123
   ```

2. **ุงูุชุญูู ูู ุงูู Navbar:**
   - โ ูุฌุจ ุฃู ุชุฑู ุฑุงุจุท "๐ญ ุงุณุชูุงู ูู ุงููุตูุน" ูุจุงุดุฑุฉ
   - โ ูุง ูุฌุจ ุฃู ุชุฑุงู ูู ูุงุฆูุฉ ููุณุฏูุฉ

3. **ุงููุตูู ุฅูู ุงูุตูุญุฉ:**
   ```
   URL: /manufacturing/fabric-receipt/
   ```
   - โ ูุฌุจ ุฃู ุชุตู ููุตูุญุฉ ุจุฏูู ุฃุฎุทุงุก
   - โ ูุฌุจ ุฃู ุชุฑู ูุงุฆูุฉ ุงูุฃููุดุฉ

4. **ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช:**
   ```python
   # ูู Django Shell
   from accounts.models import User
   user = User.objects.get(username='factory_receiver_test')
   
   # ูุฌุจ ุฃู ุชุนูุฏ ุฌููุนูุง True
   print(user.has_perm('manufacturing.can_receive_fabric'))
   print(user.has_perm('manufacturing.can_deliver_to_production_line'))
   print(user.has_perm('manufacturing.can_view_fabric_receipts'))
   print(user.has_perm('manufacturing.view_manufacturingorder'))
   ```

---

## โ ุงูุฃุณุฆูุฉ ุงูุดุงุฆุนุฉ

### ุณ1: ููุงุฐุง ูุง ูุธูุฑ ุงูุฑุงุจุท ูู ุงูู navbarุ

**ุงูุฅุฌุงุจุฉ:**
ุชุญูู ูู ุงูุชุงูู:
1. โ ุงููุณุชุฎุฏู ูุฏูู `is_factory_receiver = True`
2. โ ุงููุณุชุฎุฏู ูุฏูู `is_active = True`
3. โ ุงููุณุชุฎุฏู ูุฏูู `is_staff = True`
4. โ ุชู ุนูู logout/login ุจุนุฏ ุชุบููุฑ ุงูุตูุงุญูุงุช
5. โ ุชู ุชุญุฏูุซ ุตูุญุฉ ุงููุชุตูุญ (Ctrl+F5)

### ุณ2: ููู ุฃุญุฐู ุงููุณุชุฎุฏู ุงูุชุฌุฑูุจูุ

**ุงูุฅุฌุงุจุฉ:**
```bash
python manage.py shell -c "
from accounts.models import User
User.objects.filter(username='factory_receiver_test').delete()
print('โ ุชู ุญุฐู ุงููุณุชุฎุฏู ุงูุชุฌุฑูุจู')
"
```

### ุณ3: ูู ูููู ูููุณุชุฎุฏู ุชุนุฏูู ุฃูุงูุฑ ุงูุชุตููุนุ

**ุงูุฅุฌุงุจุฉ:**
โ **ูุง**ุ ูุณุคูู ุงูุงุณุชูุงู ูุฏูู ุตูุงุญูุฉ **ุนุฑุถ ููุท** (view only) ูุฃูุงูุฑ ุงูุชุตููุน.  
ุฅุฐุง ุฃุฑุฏุช ููุญ ุตูุงุญูุงุช ุชุนุฏููุ ุฃุถู ุงูุตูุงุญูุงุช ูุฏููุงู ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ.

### ุณ4: ูุง ุงููุฑู ุจูู "ูุณุคูู ุงููุตูุน" ู "ูุณุคูู ุงุณุชูุงู ุงููุตูุน"ุ

**ุงูุฅุฌุงุจุฉ:**

| ุงูููุงุฑูุฉ | ูุณุคูู ุงููุตูุน | ูุณุคูู ุงุณุชูุงู ุงููุตูุน |
|---------|--------------|---------------------|
| **ุงููุณุชูู** | 2 | 4 |
| **ุงูุตูุงุญูุงุช** | ูุงููุฉ ูู ุงูุชุตููุน | ุงุณุชูุงู ูุชุณููู ููุท |
| **ูุฑุซ ูู** | ูุณุคูู ุงุณุชูุงู | - (ูุง ูุฑุซ) |
| **ุงูู Navbar** | ูุงุฆูุฉ ููุณุฏูุฉ | ุฑุงุจุท ูุจุงุดุฑ |

**ููุงุญุธุฉ:** ูุณุคูู ุงููุตูุน **ูุฑุซ** ุฌููุน ุตูุงุญูุงุช ูุณุคูู ุงูุงุณุชูุงูุ ุจุงูุฅุถุงูุฉ ูุตูุงุญูุงุชู ุงูุฎุงุตุฉ.

### ุณ5: ูู ุนุฏุฏ ูุณุคููู ุงูุงุณุชูุงู ุงูุฐูู ูููู ุฅูุดุงุคููุ

**ุงูุฅุฌุงุจุฉ:**
โ **ุบูุฑ ูุญุฏูุฏ**. ูููู ุฅูุดุงุก ุฃู ุนุฏุฏ ูู ุงููุณุชุฎุฏููู ุจุฏูุฑ "ูุณุคูู ุงุณุชูุงู ูุตูุน".  
ูู ูุณุชุฎุฏู ุณูุญุตู ุนูู ููุณ ุงูุตูุงุญูุงุช.

### ุณ6: ูู ูููู ุชุฎุตูุต ุงูุตูุงุญูุงุช ููุณุชุฎุฏู ูุนููุ

**ุงูุฅุฌุงุจุฉ:**
โ **ูุนู**ุ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ:
1. ุงุฐูุจ ุฅูู `/admin/accounts/user/<user_id>/change/`
2. ูู ูุณู "user permissions"ุ ุฃุถู/ุฃุฒู ุงูุตูุงุญูุงุช ุญุณุจ ุงูุญุงุฌุฉ

โ๏ธ **ุชุญุฐูุฑ:** ุงูุชุนุฏููุงุช ุงููุฏููุฉ ูุฏ ุชุชุนุงุฑุถ ูุน ุงููุฌููุนุฉ!

### ุณ7: ูู ุงูุชุญุฏูุซุงุช ุนูู ุงููุฌููุนุฉ ุชุคุซุฑ ุนูู ุงููุณุชุฎุฏููู ุงูุญุงููููุ

**ุงูุฅุฌุงุจุฉ:**
โ **ูุนู**ุ ููุฑุงู! ุฅุฐุง ููุช ุจุชุนุฏูู ุตูุงุญูุงุช ุงููุฌููุนุฉ "ูุณุคูู ุงุณุชูุงู ูุตูุน"ุ ุณูุญุตู ุฌููุน ุงููุณุชุฎุฏููู ูู ูุฐู ุงููุฌููุนุฉ ุนูู ุงูุชุญุฏูุซุงุช ุชููุงุฆูุงู ุจุนุฏ logout/login.

---

## ๐ ูุตุงุฏุฑ ุฅุถุงููุฉ

### ุงููููุงุช ุงููุชุนููุฉ:

- **ุงูุชูุซูู ุงููุงูู:** [`FACTORY_RECEIVER_ROLE_DOCUMENTATION.md`](./FACTORY_RECEIVER_ROLE_DOCUMENTATION.md)
- **ุณูุฑูุจุช ุงูุงุฎุชุจุงุฑ:** [`test_factory_receiver.py`](./test_factory_receiver.py)
- **Model:** [`accounts/models.py`](./accounts/models.py)
- **Admin:** [`accounts/admin.py`](./accounts/admin.py)
- **Template:** [`templates/base.html`](./templates/base.html)

### Migrations:

- `accounts/migrations/0035_user_is_factory_receiver.py`
- `accounts/migrations/0036_create_system_groups.py`
- `manufacturing/migrations/0028_alter_manufacturingorderitem_options.py`

---

## โ ุฎูุงุตุฉ ุณุฑูุนุฉ

### ูุฅูุดุงุก ูุณุชุฎุฏู ุฌุฏูุฏ:

```bash
# 1. ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ
/admin/accounts/user/add/
# ูุนูู: is_active, is_staff, is_factory_receiver

# 2. ุฃู ูู Shell
python manage.py shell
```

```python
from accounts.models import User
from django.contrib.auth.models import Group

user = User.objects.create_user(
    username='receiver1',
    password='pass123',
    is_factory_receiver=True,
    is_staff=True,
    is_active=True
)
user.groups.add(Group.objects.get(name='ูุณุคูู ุงุณุชูุงู ูุตูุน'))
```

### ููุชุญูู ูู ุงููุธุงู:

```bash
python test_factory_receiver.py
```

### ููุงุฎุชุจุงุฑ ุงููุฏูู:

```
URL: /admin/
Username: factory_receiver_test
Password: test123
```

---

## ๐ ุงูุฏุนู

ูู ุญุงูุฉ ูุฌูุฏ ูุดุงูู:

1. **ุฑุงุฌุน ุงูู logs:**
   ```bash
   tail -f logs/django.log
   ```

2. **ุชุญูู ูู ุงูู migrations:**
   ```bash
   python manage.py showmigrations accounts
   python manage.py showmigrations manufacturing
   ```

3. **ุชุญูู ูู ุงููุฌููุนุงุช:**
   ```bash
   python manage.py shell -c "
   from django.contrib.auth.models import Group
   print(Group.objects.filter(name__contains='ูุตูุน').values_list('name', flat=True))
   "
   ```

---

**ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ:** 2024  
**ุงูุฅุตุฏุงุฑ:** 1.0  
**ุงูุญุงูุฉ:** โ ุชู ุงูุงุฎุชุจุงุฑ ูุงูุชุฃููุฏ
