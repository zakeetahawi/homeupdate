# ๐ ูุธุงู ุฅุดุนุงุฑุงุช ุงูุชุญูููุงุช ุงููุฎุฒููุฉ

## ๐ ุงููุตู

ูุธุงู ุฐูู ูุฅุดุนุงุฑ ูุณุคููู ุงููุฎุงุฒู ุจุงูุชุญูููุงุช ุงููุนููุฉ ุงูุชู ุชุญุชุงุฌ ููุงุณุชูุงู.

---

## ๐ฅ ุงูุตูุงุญูุงุช

### **1. ูุฏูุฑ ุงููุธุงู (is_superuser = True)**
- โ ูุฑู **ุฌููุน** ุงูุชุญูููุงุช ุงููุนููุฉ ูู ุงููุธุงู
- โ ุงูุชุญูููุงุช ูู ุฌููุน ุงููุณุชูุฏุนุงุช
- โ ุงูุญุงูุงุช ุงููุนุฑูุถุฉ: `approved` ู `in_transit`

### **2. ูุณุคูู ุงููุฎุฒูู (Warehouse Manager)**
- โ ูุฑู **ููุท** ุงูุชุญูููุงุช ุงููุงุฑุฏุฉ ููุณุชูุฏุนุงุชู
- โ ุงููุณุชูุฏุนุงุช ุงูุชู ูุฏูุฑูุง: `Warehouse.manager = current_user`
- โ ุงูุญุงูุงุช ุงููุนุฑูุถุฉ: `approved` ู `in_transit`
- โ ูุง ูุฑู ุงูุชุญูููุงุช ุงูุตุงุฏุฑุฉ ูู ูุณุชูุฏุนู
- โ ูุง ูุฑู ุงูุชุญูููุงุช ูููุณุชูุฏุนุงุช ุงูุฃุฎุฑู

---

## ๐จ ุนุฑุถ ุงูุฅุดุนุงุฑุงุช ูู ุงููุงุฌูุฉ

### **1. ูู ุดุฑูุท ุงูุฃุฏูุงุช (Header)**
```html
ุฒุฑ ุฃุตูุฑ ูุน ุฃููููุฉ ุดุงุญูุฉ + ุนุฏุฏ ุงูุชุญูููุงุช ุงููุนููุฉ
๐ ุชุญูููุงุช ูุนููุฉ (5)
```

### **2. ูู ุฃุนูู ุงูุตูุญุฉ (Alert Box)**
```
โ๏ธ ูุฏูู 5 ุชุญูููุงุช ูุงุฑุฏุฉ ุจุญุงุฌุฉ ููุงุณุชูุงู

๐ฆ #TRF-2025-001 - ูู: ุงููุณุชูุฏุน ุงูุฑุฆูุณู ุฅูู: ุงููุฑุน ุงูุดูุงูู - ุงูุญุงูุฉ: ุชูุช ุงูููุงููุฉ
๐ฆ #TRF-2025-002 - ูู: ุงููุณุชูุฏุน ุงูุฌููุจู ุฅูู: ุงููุฑุน ุงูุดูุงูู - ุงูุญุงูุฉ: ููุฏ ุงูููู
...
```

---

## ๐ API Endpoints

### **GET `/inventory/api/pending-transfers/`**

**ุงููุตู:** ุงูุญุตูู ุนูู ุงูุชุญูููุงุช ุงููุนููุฉ ุญุณุจ ุตูุงุญูุงุช ุงููุณุชุฎุฏู

**Authentication:** Required (login_required)

**Response:**
```json
{
  "success": true,
  "count": 5,
  "transfers": [
    {
      "id": 123,
      "transfer_number": "TRF-2025-001",
      "from_warehouse": {
        "id": 1,
        "name": "ุงููุณุชูุฏุน ุงูุฑุฆูุณู"
      },
      "to_warehouse": {
        "id": 2,
        "name": "ุงููุฑุน ุงูุดูุงูู"
      },
      "status": "approved",
      "status_display": "ุชูุช ุงูููุงููุฉ",
      "transfer_date": "2025-11-08T10:30:00",
      "expected_arrival_date": "2025-11-10T10:00:00",
      "created_by": "ุฃุญูุฏ ูุญูุฏ",
      "created_at": "2025-11-08T09:00:00",
      "total_items": 15,
      "reason": "ููู ูููุฑุน ุงูุฌุฏูุฏ",
      "url": "/inventory/stock-transfer/123/"
    }
  ],
  "is_superuser": false,
  "managed_warehouses": [
    {"id": 2, "name": "ุงููุฑุน ุงูุดูุงูู"}
  ],
  "last_updated": "2025-11-08T14:30:00"
}
```

**ุญุงูุงุช ุงูุฎุทุฃ:**
```json
{
  "success": true,
  "count": 0,
  "transfers": [],
  "message": "ูุง ุชูุฌุฏ ูุณุชูุฏุนุงุช ูุณุฌูุฉ ุจุงุณูู"
}
```

---

## ๐ง ุงููููุงุช ุงููุถุงูุฉ/ุงููุนุฏูุฉ

### **1. ูููุงุช ุฌุฏูุฏุฉ:**
- โ `inventory/context_processors.py` - Context processor ููุฅุดุนุงุฑุงุช

### **2. ูููุงุช ูุนุฏูุฉ:**
- โ `inventory/api_views.py` - ุฅุถุงูุฉ `pending_transfers_api()`
- โ `inventory/urls.py` - ุฅุถุงูุฉ ูุณุงุฑ API
- โ `inventory/templates/inventory/inventory_base_custom.html` - ุนุฑุถ ุงูุฅุดุนุงุฑุงุช
- โ `crm/settings.py` - ุชุณุฌูู context processor (ููุฌูุฏ ูุณุจูุงู)

---

## ๐ ุญุงูุงุช ุงูุชุญูููุงุช

| ุงูุญุงูุฉ | ุงููุตู | ูุนููุ |
|--------|-------|-------|
| `draft` | ูุณูุฏุฉ | โ |
| `pending` | ููุฏ ุงูุงูุชุธุงุฑ | โ |
| `approved` | ุชูุช ุงูููุงููุฉ | โ |
| `in_transit` | ููุฏ ุงูููู | โ |
| `completed` | ููุชูู | โ |
| `cancelled` | ููุบู | โ |
| `rejected` | ูุฑููุถ | โ |

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### **1. ุงุฎุชุจุงุฑ ูุฏูุฑ ุงููุธุงู:**
```bash
# ุชุณุฌูู ุงูุฏุฎูู ููุฏูุฑ ูุธุงู
# ูุชุญ /inventory/
# ูุฌุจ ุฃู ูุธูุฑ: "ูุฏูู X ุชุญูููุงุช ูุนููุฉ"
```

### **2. ุงุฎุชุจุงุฑ ูุณุคูู ุงููุฎุฒูู:**
```bash
# ุชุณุฌูู ุงูุฏุฎูู ููุณุคูู ูุฎุฒูู
# ูุฌุจ ุฃู ูุธูุฑ ููุท ุงูุชุญูููุงุช ุงููุงุฑุฏุฉ ููุณุชูุฏุนุงุชู
# ูุง ูุฌุจ ุฃู ูุธูุฑ ุงูุชุญูููุงุช ูููุณุชูุฏุนุงุช ุงูุฃุฎุฑู
```

### **3. ุงุฎุชุจุงุฑ API:**
```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
     http://127.0.0.1:8000/inventory/api/pending-transfers/
```

---

## ๐ฏ ุงูุณููุงุฑูู ุงููุงูู

### **ูุซุงู 1: ูุฏูุฑ ุงููุธุงู**
```
ุงููุณุชุฎุฏู: admin@example.com (is_superuser=True)
ุงููุณุชูุฏุนุงุช: ุฌููุน ุงููุณุชูุฏุนุงุช

ุงูุชุญูููุงุช ุงููุนููุฉ:
1. ูู: ุงููุณุชูุฏุน A โ ุฅูู: ุงููุณุชูุฏุน B (approved)
2. ูู: ุงููุณุชูุฏุน B โ ุฅูู: ุงููุณุชูุฏุน C (in_transit)
3. ูู: ุงููุณุชูุฏุน C โ ุฅูู: ุงููุณุชูุฏุน A (approved)

โ ูุฑู ุฌููุน ุงูุชุญูููุงุช ุงูุซูุงุซุฉ
```

### **ูุซุงู 2: ูุณุคูู ุงููุฎุฒูู**
```
ุงููุณุชุฎุฏู: manager@example.com (Warehouse.manager)
ุงููุณุชูุฏุนุงุช ุงููุณุคูู ุนููุง: ุงููุณุชูุฏุน B

ุงูุชุญูููุงุช ูู ุงููุธุงู:
1. ูู: ุงููุณุชูุฏุน A โ ุฅูู: ุงููุณุชูุฏุน B (approved) โ
2. ูู: ุงููุณุชูุฏุน B โ ุฅูู: ุงููุณุชูุฏุน C (in_transit) โ
3. ูู: ุงููุณุชูุฏุน C โ ุฅูู: ุงููุณุชูุฏุน A (approved) โ

โ ูุฑู ููุท ุงูุชุญููู #1 (ุงููุงุฑุฏ ููุณุชูุฏุนู)
```

---

## ๐ก ููุงุญุธุงุช ูููุฉ

1. **ุงูุฅุดุนุงุฑ ูุธูุฑ ููุท ูู ุตูุญุงุช ุงููุฎุฒูู** ุงูุชู ุชุณุชุฎุฏู `inventory_base_custom.html`

2. **ุงูุชุญุฏูุซ ุงูุชููุงุฆู:** ูููู ุฅุถุงูุฉ JavaScript ููุชุญุฏูุซ ูู 30 ุซุงููุฉ:
```javascript
setInterval(() => {
    fetch('/inventory/api/pending-transfers/')
        .then(res => res.json())
        .then(data => {
            document.getElementById('pendingCount').textContent = data.count;
        });
}, 30000);
```

3. **ุงูุจุฑูุฏ ุงูุฅููุชุฑููู/ุงูุฅุดุนุงุฑุงุช Push:** ูููู ุฅุถุงูุชูุง ูุงุญูุงู ุจุงุณุชุฎุฏุงู signals

---

## โ ุงูุฎูุงุตุฉ

- โ ูุธุงู ุฅุดุนุงุฑุงุช ุฐูู ุญุณุจ ุงูุตูุงุญูุงุช
- โ ูุธูุฑ ูู ุงููุงุฌูุฉ ุชููุงุฆูุงู
- โ API ููุชุญุฏูุซุงุช ุงูุญูุฉ
- โ ุณูู ุงูุชูุณุน ูุงูุชุทููุฑ
- โ ุฃูุงู ูุงูู (ูู ูุณุชุฎุฏู ูุฑู ูุง ูุฎุตู ููุท)

**๐ ุงููุธุงู ุฌุงูุฒ ููุนูู!**
