# ุชุญููู ุดุงูู: ูุดููุฉ ุงูุตูุงุญูุงุช ูู ูุธุงู ุงูุทูุจุงุช

## ๐ด ุงููุดููุฉ ุงูุฑุฆูุณูุฉ

**ุงูุจุงุฆุนูู (Salesperson) ูุงููุณุชุฎุฏููู ูู ูุฌููุนุฉ "ุจุงุฆุน" ูุง ูุณุชุทูุนูู:**
1. โ ุฅุถุงูุฉ ุนูุงุตุฑ ููุทูุจ ูุฏูููุง
2. โ ุฅุถุงูุฉ ุนูุงุตุฑ ูู ุงูุจุงุฑููุฏ
3. โ ุญูุธ ุงูุทูุจ ุจุนุฏ ุฅุถุงูุฉ ุงูุนูุงุตุฑ

**ุงููุฏูุฑ (Admin/Superuser) ูุณุชุทูุน:**
- โ ุฅุถุงูุฉ ุนูุงุตุฑ ูุฏูููุง
- โ ุฅุถุงูุฉ ุนูุงุตุฑ ูู ุงูุจุงุฑููุฏ
- โ ุญูุธ ุงูุทูุจ ุจูุฌุงุญ

---

## ๐ ุงูุณุจุจ ุงูุฌุฐุฑู

### 1. **Decorator ุนูู View ุงูุฅูุดุงุก**
```python
# ูู orders/views.py - ุงูุณุทุฑ 317
@permission_required('orders.add_order', raise_exception=True)
def order_create(request):
```

### 2. **Decorator ุนูู View ุงูุชุนุฏูู**
```python
# ูู orders/views.py - ุงูุณุทุฑ 567
@permission_required('orders.change_order', raise_exception=True)
def order_update(request, pk):
```

### 3. **ุงููุดููุฉ ุงูุญููููุฉ**
- ุงูู `@permission_required` ูุชุญูู ูู ุตูุงุญูุงุช Django ุงูุงูุชุฑุงุถูุฉ ููุท
- ุงูุจุงุฆุนูู ูุง ูููููู ุตูุงุญูุฉ `orders.add_order` ุฃู `orders.change_order`
- ุญุชู ูู ูุงููุง ูููููู ุงูุตูุงุญูุงุชุ ุงูู decorator ูุฑูุน ุงุณุชุซูุงุก `PermissionDenied`

### 4. **ูุธุงู ุงูุตูุงุญูุงุช ุงูุญุงูู**
ูู `orders/permissions.py`:
- `can_user_create_order_type()` - ูุณูุญ ููุจุงุฆุนูู ุจุฅูุดุงุก ุงูุทูุจุงุช
- `can_user_edit_order()` - ูุณูุญ ููุจุงุฆุนูู ุจุชุนุฏูู ุทูุจุงุชูู
- `can_user_view_order()` - ูุณูุญ ููุจุงุฆุนูู ุจุฑุคูุฉ ุทูุจุงุชูู

**ููู ูุฐู ุงูุฏูุงู ูุง ุชูุณุชุฎุฏู ูู ุงูู decorators!**

---

## โ ุงูุญู ุงูููุชุฑุญ

### ุงูุฎูุงุฑ 1: ุงุณุชุฎุฏุงู Decorator ูุฎุตุต (ุงูุฃูุถู)
```python
def order_permission_required(view_func):
    """Decorator ูุฎุตุต ูุณุชุฎุฏู ูุธุงู ุงูุตูุงุญูุงุช ุงููุชูุฏู"""
    @login_required
    def wrapper(request, *args, **kwargs):
        # ุงุณุชุฎุฏุงู ุฏูุงู ุงูุตูุงุญูุงุช ุงููุชูุฏูุฉ
        if request.method == 'POST':
            # ููุฅูุดุงุก ูุงูุชุนุฏูู
            if not can_user_create_order_type(request.user, 'product'):
                raise PermissionDenied()
        return view_func(request, *args, **kwargs)
    return wrapper
```

### ุงูุฎูุงุฑ 2: ุฅุฒุงูุฉ Decorator ูุงูุชุญูู ุฏุงุฎู View
```python
@login_required
def order_create(request):
    # ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุฏุงุฎู ุงูู view
    if not can_user_create_order_type(request.user, 'product'):
        raise PermissionDenied()
    # ... ุจุงูู ุงูููุฏ
```

### ุงูุฎูุงุฑ 3: ููุญ ุงูุตูุงุญูุงุช ููุจุงุฆุนูู (ุงูุฃุณูู)
```python
# ูู management command
group = Group.objects.get(name='ุจุงุฆุน')
group.permissions.add(
    Permission.objects.get(codename='add_order'),
    Permission.objects.get(codename='change_order'),
    Permission.objects.get(codename='add_orderitem'),
    Permission.objects.get(codename='change_orderitem'),
)
```

---

## ๐ ุงููููุงุช ุงููุชุฃุซุฑุฉ

1. **orders/views.py** - ุงูุณุทูุฑ 317ุ 567
2. **orders/permissions.py** - ูุธุงู ุงูุตูุงุญูุงุช ุงููุชูุฏู
3. **orders/forms.py** - ููุงุฐุฌ ุงูุทูุจุงุช
4. **templates/includes/order_barcode_scanner_modal.html** - ูุงุฌูุฉ ุงูุจุงุฑููุฏ

---

## ๐ฏ ุงูุชูุตูุงุช

1. **ูุชุญ ุงููุตูู ููุจุงุฆุนูู** ูุฅูุดุงุก ูุชุนุฏูู ุงูุทูุจุงุช
2. **ุงุณุชุฎุฏุงู ูุธุงู ุงูุตูุงุญูุงุช ุงููุชูุฏู** ุจุฏูุงู ูู ุงูู decorators ุงูุจุณูุทุฉ
3. **ุงูุชุญูู ูู ุงูุตูุงุญูุงุช ุฏุงุฎู ุงูู views** ููุชุญูู ุงูุฃูุถู
4. **ุชูุซูู ุงูุตูุงุญูุงุช** ุจูุถูุญ ููู ุฏูุฑ

---

## ๐ ููุงุฑูุฉ ุงูุฃุฏูุงุฑ ุงูุญุงููุฉ

| ุงูุฏูุฑ | ุฅูุดุงุก | ุชุนุฏูู | ุญุฐู | ุนุฑุถ |
|------|-------|-------|-----|-----|
| Admin | โ | โ | โ | โ |
| ูุฏูุฑ ุนุงู | โ | โ | โ | โ |
| ูุฏูุฑ ูุฑุน | โ | โ | โ | โ |
| ุจุงุฆุน | โ | โ | โ | โ |
| ููู ูุนุงููุฉ | โ | โ | โ | โ |

**ุงููุดููุฉ:** ุงูุจุงุฆุน ูุณุชุทูุน ุฑุคูุฉ ุงูุทูุจุงุช ููู ูุง ูุณุชุทูุน ุฅูุดุงุก ุฃู ุชุนุฏูู!

