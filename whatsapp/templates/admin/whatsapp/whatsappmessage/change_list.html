{% extends "admin/change_list.html" %}
{% load i18n static %}

{% block content_title %}
<h1>{{ title }}</h1>

{% if statistics %}
<div class="module" style="margin-bottom: 20px;">
    <h2>ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</h2>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin: 20px 0;">
        <!-- Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ -->
        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; border-left: 4px solid #417690;">
            <div style="font-size: 24px; font-weight: bold; color: #417690;">{{ statistics.total_messages }}</div>
            <div style="color: #666; margin-top: 5px;">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„</div>
        </div>

        <!-- Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙŠÙˆÙ… -->
        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; border-left: 4px solid #28a745;">
            <div style="font-size: 24px; font-weight: bold; color: #28a745;">{{ statistics.today_messages }}</div>
            <div style="color: #666; margin-top: 5px;">Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„ÙŠÙˆÙ…</div>
        </div>

        <!-- Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ -->
        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; border-left: 4px solid #17a2b8;">
            <div style="font-size: 24px; font-weight: bold; color: #17a2b8;">{{ statistics.week_messages }}</div>
            <div style="color: #666; margin-top: 5px;">Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</div>
        </div>

        <!-- Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­ -->
        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; border-left: 4px solid #ffc107;">
            <div style="font-size: 24px; font-weight: bold; color: #ffc107;">{{ statistics.success_rate }}%</div>
            <div style="color: #666; margin-top: 5px;">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù†Ø¬Ø§Ø­</div>
        </div>

        <!-- Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ³Ù„ÙŠÙ… -->
        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; border-left: 4px solid #20c997;">
            <div style="font-size: 24px; font-weight: bold; color: #20c997;">{{ statistics.delivery_rate }}%</div>
            <div style="color: #666; margin-top: 5px;">Ù…Ø¹Ø¯Ù„ Ø§Ù„ØªØ³Ù„ÙŠÙ…</div>
        </div>

        <!-- Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø© -->
        <div style="background: #f8f9fa; padding: 15px; border-radius: 5px; border-left: 4px solid #6f42c1;">
            <div style="font-size: 24px; font-weight: bold; color: #6f42c1;">{{ statistics.read_rate }}%</div>
            <div style="color: #666; margin-top: 5px;">Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©</div>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø© -->
        <div style="background: white; padding: 15px; border: 1px solid #ddd; border-radius: 5px;">
            <h3 style="margin-top: 0;">Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ù„Ø©</h3>
            <table style="width: 100%;">
                <tr>
                    <th style="text-align: right; padding: 5px;">Ø§Ù„Ø­Ø§Ù„Ø©</th>
                    <th style="text-align: left; padding: 5px;">Ø§Ù„Ø¹Ø¯Ø¯</th>
                </tr>
                {% for stat in statistics.stats_by_status %}
                <tr>
                    <td style="padding: 5px;">
                        {% if stat.status == 'SENT' %}ğŸ”µ ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
                        {% elif stat.status == 'DELIVERED' %}ğŸŸ¢ ØªÙ… Ø§Ù„ØªØ³Ù„ÙŠÙ…
                        {% elif stat.status == 'READ' %}ğŸŸ¢ ØªÙ…Øª Ø§Ù„Ù‚Ø±Ø§Ø¡Ø©
                        {% elif stat.status == 'FAILED' %}ğŸ”´ ÙØ´Ù„
                        {% else %}ğŸŸ¡ Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±
                        {% endif %}
                    </td>
                    <td style="padding: 5px; font-weight: bold;">{{ stat.count }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>

        <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø­Ø³Ø¨ Ø§Ù„Ù†ÙˆØ¹ -->
        <div style="background: white; padding: 15px; border: 1px solid #ddd; border-radius: 5px;">
            <h3 style="margin-top: 0;">Ø£ÙƒØ«Ø± 5 Ø£Ù†ÙˆØ§Ø¹</h3>
            <table style="width: 100%;">
                <tr>
                    <th style="text-align: right; padding: 5px;">Ø§Ù„Ù†ÙˆØ¹</th>
                    <th style="text-align: left; padding: 5px;">Ø§Ù„Ø¹Ø¯Ø¯</th>
                </tr>
                {% for stat in statistics.stats_by_type %}
                <tr>
                    <td style="padding: 5px;">{{ stat.message_type }}</td>
                    <td style="padding: 5px; font-weight: bold;">{{ stat.count }}</td>
                </tr>
                {% endfor %}
            </table>
        </div>
    </div>
</div>
{% endif %}
{% endblock %}

{% block content %}
{{ block.super }}
{% endblock %}