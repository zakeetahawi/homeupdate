{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
    <div class="container-fluid py-4">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="card shadow mb-4">
                    <div class="card-header py-3 d-flex justify-content-between align-items-center">
                        <h6 class="m-0 font-weight-bold text-primary">{{ title }}</h6>
                        <a href="{% url 'installations:traffic_dashboard' %}"
                           class="btn btn-sm btn-secondary">
                            <i class="fas fa-arrow-right me-1"></i> عودة
                        </a>
                    </div>
                    <div class="card-body">
                        <form method="post">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <label class="form-label" for="{{ form.name.id_for_label }}">{{ form.name.label }}</label>
                                    {{ form.name }}
                                    {% if form.name.errors %}<div class="text-danger small">{{ form.name.errors }}</div>{% endif %}
                                </div>
                                <div class="col-md-6 mb-3">
                                    <label class="form-label" for="{{ form.plate_number.id_for_label }}">{{ form.plate_number.label }}</label>
                                    {{ form.plate_number }}
                                    {% if form.plate_number.errors %}<div class="text-danger small">{{ form.plate_number.errors }}</div>{% endif %}
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label" for="{{ form.chassis_number.id_for_label }}">{{ form.chassis_number.label }}</label>
                                {{ form.chassis_number }}
                                {% if form.chassis_number.errors %}<div class="text-danger small">{{ form.chassis_number.errors }}</div>{% endif %}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label" for="{{ form.vehicle_type.id_for_label }}">{{ form.vehicle_type.label }}</label>
                                {{ form.vehicle_type }}
                                {% if form.vehicle_type.errors %}<div class="text-danger small">{{ form.vehicle_type.errors }}</div>{% endif %}
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label" for="{{ form.model.id_for_label }}">{{ form.model.label }}</label>
                                {{ form.model }}
                                {% if form.model.errors %}<div class="text-danger small">{{ form.model.errors }}</div>{% endif %}
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label" for="{{ form.status.id_for_label }}">{{ form.status.label }}</label>
                                {{ form.status }}
                                {% if form.status.errors %}<div class="text-danger small">{{ form.status.errors }}</div>{% endif %}
                            </div>
                        </div>
                        <div class="alert alert-info py-2 small">
                            <i class="fas fa-info-circle me-1"></i>
                            <strong>تنبيه:</strong> لتخصيص سائق لهذه المركبة، يرجى الذهاب إلى
                            <a href="{% url 'installations:driver_list' %}" class="alert-link">إدارة السائقين</a>
                            وتعديل بيانات السائق لاختيار المركبة.
                            <div class="mb-3">
                                <label class="form-label" for="{{ form.license_expiry.id_for_label }}">{{ form.license_expiry.label }}</label>
                                {{ form.license_expiry }}
                                {% if form.license_expiry.errors %}<div class="text-danger small">{{ form.license_expiry.errors }}</div>{% endif %}
                            </div>
                            <div class="mt-4">
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-save me-1"></i> حفظ
                                </button>
                                <a href="{% url 'installations:traffic_dashboard' %}"
                                   class="btn btn-secondary">إلغاء</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
