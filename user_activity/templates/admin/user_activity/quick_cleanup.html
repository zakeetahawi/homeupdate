{% extends "admin/base_site.html" %}
{% load i18n static %}

{% block extrahead %}
{{ block.super }}
<style>
    .cleanup-card {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin: 20px 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin: 20px 0;
    }
    .stat-box {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 6px;
        text-align: center;
        border-left: 4px solid #007bff;
    }
    .stat-number {
        font-size: 32px;
        font-weight: bold;
        color: #333;
    }
    .stat-label {
        color: #666;
        font-size: 14px;
        margin-top: 5px;
    }
    .action-btn {
        display: block;
        width: 100%;
        padding: 12px;
        margin: 10px 0;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
    }
    .btn-info { background: #17a2b8; color: white; }
    .btn-warning { background: #ffc107; color: #333; }
    .btn-danger { background: #dc3545; color: white; }
    .btn-success { background: #28a745; color: white; }
    .action-btn:hover { opacity: 0.9; transform: translateY(-2px); }
    .warning-box {
        background: #fff3cd;
        border: 2px solid #ffc107;
        border-radius: 6px;
        padding: 15px;
        margin: 20px 0;
    }
    .danger-box {
        background: #f8d7da;
        border: 2px solid #dc3545;
        border-radius: 6px;
        padding: 15px;
        margin: 20px 0;
    }
</style>
{% endblock %}

{% block content %}
<h1>ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¬Ù…Ø§Ø¹ÙŠ ÙˆØ³Ø±ÙŠØ¹</h1>

<div class="cleanup-card">
    <h2>ğŸ“Š Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø­Ø§Ù„ÙŠØ©</h2>
    <div class="stats-grid">
        <div class="stat-box">
            <div class="stat-number">{{ total_sessions }}</div>
            <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¬Ù„Ø³Ø§Øª</div>
        </div>
        <div class="stat-box">
            <div class="stat-number">{{ inactive_sessions }}</div>
            <div class="stat-label">Ø¬Ù„Ø³Ø§Øª ØºÙŠØ± Ù†Ø´Ø·Ø©</div>
        </div>
        <div class="stat-box">
            <div class="stat-number">{{ old_7days }}</div>
            <div class="stat-label">Ø£Ù‚Ø¯Ù… Ù…Ù† Ø£Ø³Ø¨ÙˆØ¹</div>
        </div>
        <div class="stat-box">
            <div class="stat-number">{{ old_30days }}</div>
            <div class="stat-label">Ø£Ù‚Ø¯Ù… Ù…Ù† Ø´Ù‡Ø±</div>
        </div>
        <div class="stat-box">
            <div class="stat-number">{{ total_logs }}</div>
            <div class="stat-label">Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø·</div>
        </div>
    </div>
</div>

<div class="cleanup-card">
    <h2>âš¡ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø­Ø°Ù Ø§Ù„Ø³Ø±ÙŠØ¹</h2>
    <p>Ø§Ø®ØªØ± Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©. Ø§Ù„Ø­Ø°Ù Ø³ÙŠØªÙ… ÙÙˆØ±Ø§Ù‹ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… SQL Ù…Ø¨Ø§Ø´Ø±.</p>
    
    <form method="post" style="margin-top: 20px;">
        {% csrf_token %}
        
        <button type="submit" name="action" value="inactive" class="action-btn btn-info" 
                onclick="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù {{ inactive_sessions }} Ø¬Ù„Ø³Ø© ØºÙŠØ± Ù†Ø´Ø·Ø©ØŸ')">
            ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø§Øª ØºÙŠØ± Ø§Ù„Ù†Ø´Ø·Ø© ({{ inactive_sessions }} Ø¬Ù„Ø³Ø©)
        </button>
        
        <button type="submit" name="action" value="1day" class="action-btn btn-success" 
                onclick="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù {{ old_1day }} Ø¬Ù„Ø³Ø© Ø£Ù‚Ø¯Ù… Ù…Ù† ÙŠÙˆÙ…ØŸ')">
            â° Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø£Ù‚Ø¯Ù… Ù…Ù† ÙŠÙˆÙ… ({{ old_1day }} Ø¬Ù„Ø³Ø©)
        </button>
        
        <button type="submit" name="action" value="7days" class="action-btn btn-success" 
                onclick="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù {{ old_7days }} Ø¬Ù„Ø³Ø© Ø£Ù‚Ø¯Ù… Ù…Ù† Ø£Ø³Ø¨ÙˆØ¹ØŸ')">
            â° Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø£Ù‚Ø¯Ù… Ù…Ù† Ø£Ø³Ø¨ÙˆØ¹ ({{ old_7days }} Ø¬Ù„Ø³Ø©)
        </button>
        
        <button type="submit" name="action" value="30days" class="action-btn btn-success" 
                onclick="return confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù {{ old_30days }} Ø¬Ù„Ø³Ø© Ø£Ù‚Ø¯Ù… Ù…Ù† Ø´Ù‡Ø±ØŸ')">
            â° Ø­Ø°Ù Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ø£Ù‚Ø¯Ù… Ù…Ù† Ø´Ù‡Ø± ({{ old_30days }} Ø¬Ù„Ø³Ø©)
        </button>
        
        <div class="warning-box">
            <strong>âš ï¸ ØªØ­Ø°ÙŠØ±:</strong> Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø®Ø·ÙŠØ±Ø© ÙˆÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡Ø§!
        </div>
        
        <button type="submit" name="action" value="all_except_super" class="action-btn btn-warning" 
                onclick="return confirm('âš ï¸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ù„Ø³Ø§Øª Ù…Ø§Ø¹Ø¯Ø§ Ø§Ù„Ø³ÙˆØ¨Ø± ÙŠÙˆØ²Ø±!\n\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ')">
            ğŸ”¶ Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ù„Ø³Ø§Øª (Ù…Ø§Ø¹Ø¯Ø§ Ø§Ù„Ø³ÙˆØ¨Ø± ÙŠÙˆØ²Ø±)
        </button>
        
        <div class="danger-box">
            <strong>ğŸ”´ Ø®Ø·Ø±:</strong> Ø§Ù„Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ ÙŠØ­Ø°Ù <strong>ÙƒÙ„ Ø´ÙŠØ¡</strong>!
        </div>
        
        <button type="submit" name="action" value="all_data" class="action-btn btn-danger" 
                onclick="return confirm('ğŸ”´ğŸ”´ ØªØ­Ø°ÙŠØ± Ù†Ù‡Ø§Ø¦ÙŠ!\n\nØ³ÙŠØªÙ… Ø­Ø°Ù:\n- Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¬Ù„Ø³Ø§Øª ({{ total_sessions }})\n- Ø¬Ù…ÙŠØ¹ Ø³Ø¬Ù„Ø§Øª Ø§Ù„Ù†Ø´Ø§Ø· ({{ total_logs }})\n\nÙ„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹!\n\nÙ‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ 100%ØŸ')">
            ğŸ”´ Ø­Ø°Ù ÙƒÙ„ Ø´ÙŠØ¡ (Ø¬Ù„Ø³Ø§Øª + Ø³Ø¬Ù„Ø§Øª)
        </button>
    </form>
</div>

<div class="cleanup-card">
    <p>
        <a href="{% url 'admin:user_activity_usersession_changelist' %}" class="button">â† Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</a>
    </p>
</div>

{% endblock %}
