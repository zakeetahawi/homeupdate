# سجل التغييرات (Changelog)

جميع التغييرات المهمة في هذا المشروع سيتم توثيقها في هذا الملف.

التنسيق مبني على [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)،
وهذا المشروع يتبع [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.1.0] - 2025-08-30

### تمت الإضافة الجديدة
- **نظام إدارة أوامر التصنيع المحسن**
  - إضافة صفحة تفاصيل أمر التصنيع مع عرض شامل للعناصر
  - إضافة نظام طباعة متقدم لعناصر الطلب مع تنسيق احترافي
  - إضافة عرض حالة التقطيع والاستلام لكل عنصر
  - إضافة معلومات المستودع وبيانات المستلم
  - إضافة رقم الإذن ورقم الشنطة لكل عنصر

- **نظام استلام الأقمشة المطور**
  - تحسين ربط استلامات الأقمشة بأوامر التصنيع
  - إضافة تتبع دقيق لحالة الاستلام
  - إضافة معلومات المستلم وتاريخ الاستلام
  - تحسين عرض رقم الشنطة وبيانات الاستلام

- **نظام استلام المنتجات المحسن**
  - تحسين صفحة قائمة استلامات المنتجات
  - إضافة عرض تفاصيل المنتج مع الخامة واللون
  - تحسين عرض رقم الإذن كأول عمود
  - إضافة معلومات شاملة عن كل استلام

### تم التحسين بشكل كبير
- **واجهة المستخدم**
  - تحسين تصميم الجداول مع ألوان وتنسيق أفضل
  - إضافة أيقونات توضيحية لكل نوع من البيانات
  - تحسين عرض البيانات في أعمدة منظمة
  - إضافة badges ملونة لحالات مختلفة

- **نظام الطباعة**
  - إنشاء قالب طباعة منفصل وواضح
  - إضافة معلومات أمر التصنيع في header الطباعة
  - تحسين تنسيق الجدول للطباعة (حدود واضحة، خط مناسب)
  - إعداد الصفحة للطباعة الأفقية (Landscape)
  - إزالة الأيقونات والألوان في الطباعة
  - إضافة تاريخ ووقت الطباعة

- **عرض البيانات**
  - تحسين عرض تفاصيل المنتج مع المستودع والخامة واللون
  - إضافة عرض حالة التقطيع مع التاريخ
  - تحسين عرض حالة الاستلام مع معلومات المستلم
  - إضافة عرض رقم الإذن ورقم الشنطة بوضوح

### تم الإصلاح
- **مشاكل عرض البيانات**
  - إصلاح مشكلة عدم ظهور رقم الشنطة وحالة الاستلام الصحيحة
  - إصلاح خطأ AttributeError في تعديل خصائص OrderItem
  - إصلاح مشكلة البحث عن بيانات الاستلام في FabricReceiptItem
  - إصلاح عرض حالة الاستلام للعناصر المستلمة فعلياً

- **مشاكل الطباعة**
  - إصلاح قالب الطباعة ليعرض الجدول فقط بدلاً من الصفحة كاملة
  - إصلاح مشكلة عدم وضوح البيانات في الطباعة
  - إصلاح تنسيق الجدول والحدود في الطباعة
  - إصلاح عرض معلومات أمر التصنيع في الطباعة

- **مشاكل في View والمنطق**
  - إصلاح منطق البحث عن استلامات الأقمشة
  - إصلاح ربط البيانات بين الجداول المختلفة
  - إصلاح عرض بيانات المستودع في تفاصيل المنتج
  - إصلاح منطق تحديد حالة الاستلام

### تمت الإزالة
- **عناصر غير ضرورية**
  - إزالة قسم الإحصائيات من صفحة تفاصيل أمر التصنيع
  - إزالة بطاقة معلومات التقطيع والاستلام الفارغة
  - إزالة عمود المخزن المنفصل (تم دمجه في تفاصيل المنتج)
  - إزالة الشروط الخاصة بالمستخدم لعرض البطاقة

- **كود مكرر**
  - إزالة الكود المكرر في templates
  - إزالة CSS غير مستخدم
  - تنظيف JavaScript functions

### تفاصيل تقنية
- **تحسينات قاعدة البيانات**
  - تحسين استعلامات البحث عن بيانات الاستلام
  - إضافة منطق بديل للبحث في حالة عدم وجود FabricReceiptItem
  - تحسين ربط البيانات بين الجداول

- **تحسينات الأداء**
  - تقليل عدد استعلامات قاعدة البيانات
  - تحسين تحميل البيانات في صفحة التفاصيل
  - تحسين عرض البيانات في الجداول

### ملاحظات للمطورين
- تم إعادة هيكلة view الخاص بتفاصيل أمر التصنيع
- تم تحسين template لعرض البيانات بشكل أكثر تنظيماً
- تم إضافة نظام طباعة متقدم يمكن تطويره مستقبلاً
- تم إصلاح جميع المشاكل المتعلقة بعرض حالة الاستلام

### الملفات المتأثرة
```
manufacturing/views.py
manufacturing/templates/manufacturing/manufacturingorder_detail.html
manufacturing/templates/manufacturing/product_receipts_list.html
```

### اختبارات مطلوبة
- [ ] اختبار عرض تفاصيل أمر التصنيع
- [ ] اختبار نظام الطباعة الجديد
- [ ] اختبار عرض حالة الاستلام الصحيحة
- [ ] اختبار عرض رقم الشنطة وبيانات المستلم
- [ ] اختبار صفحة استلامات المنتجات

## [2.0.0] - 2025-08-29

### تمت الإضافة
- إضافة نظام إدارة أوامر التصنيع الشامل
- إضافة نظام استلام الأقمشة من المصنع
- إضافة نظام استلام المنتجات من المخازن
- إضافة واجهات مستخدم محسنة لإدارة التصنيع
- إضافة نظام التتبع والمراقبة لحالة الطلبات
- إضافة تقارير مفصلة لأوامر التصنيع
- إضافة نظام الإشعارات للطلبات المتأخرة

### تم التحسين
- تحسين أداء استعلامات قاعدة البيانات
- تحسين واجهة المستخدم وتجربة الاستخدام
- تحسين نظام الأذونات والصلاحيات

### تم الإصلاح
- إصلاح مشاكل عرض البيانات في بعض التقارير
- إصلاح مشاكل الأذونات في بعض الصفحات
- إصلاح مشاكل التنسيق في واجهة المستخدم

---

## معلومات إضافية

### كيفية الاختبار
1. تشغيل الخادم المحلي
2. الانتقال إلى صفحة تفاصيل أمر التصنيع
3. اختبار نظام الطباعة
4. التحقق من عرض البيانات بشكل صحيح

### متطلبات النظام
- Python 3.8+
- Django 4.2+
- PostgreSQL 12+
- Redis (للمهام غير المتزامنة)

### المساهمة
يرجى قراءة دليل المساهمة قبل إرسال أي تغييرات.
